<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETNS Profile Nexus | The Struggler</title>

    <!-- Open Graph / Link Preview Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://etns-profile.com">
    <meta property="og:title" content="ETNS Profile Nexus | The Struggler's Domain">
    <meta property="og:description" content="An architect of digital domains and software systems. Dedicated to fast, discrete, and untrackable execution.">
    <meta property="og:image" content="https://placehold.co/1200x630/8B0000/FFFFFF?text=ETNS+PROFILE+NEXUS">
    
    <!-- Twitter Card Tags -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://etns-profile.com">
    <meta property="twitter:title" content="ETNS Profile Nexus | The Struggler's Domain">
    <meta property="twitter:description" content="An architect of digital domains and software systems. Dedicated to fast, discrete, and untrackable execution.">
    <meta property="twitter:image" content="https://placehold.co/1200x630/8B0000/FFFFFF?text=ETNS+PROFILE+NEXUS">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter and Cinzel Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <!-- Custom Styles for Theme -->
    <style>
        /* General Setup */
        .font-cinzel { font-family: 'Cinzel', serif; }
        .font-inter { font-family: 'Inter', sans-serif; }
        
        body {
            background-color: #030712; /* Deep Blue/Black */
            /* Ensure the body is full height for min-h-screen to work */
            min-height: 100vh;
        }

        /* Base Text Size for Normal Content */
        p, li { font-size: 1.125rem; /* text-lg */ line-height: 1.75; } 
        
        /* Sidebar Navigation Effects */
        .sidebar-nav-item {
            transition: all 0.2s ease-in-out;
            filter: drop-shadow(0 0 2px #8B0000);
        }
        .sidebar-nav-item:hover {
            transform: scale(1.03);
            filter: drop-shadow(0 0 8px #FF0000) blur(0.5px);
        }
        .glaze-box:hover {
            box-shadow: 0 0 15px rgba(139, 0, 0, 0.7);
            transform: translateY(-2px);
            transition: all 0.3s ease-in-out;
            filter: blur(0.1px);
        }
        
        /* Pulse Animation */
        @keyframes pulse-red {
            0%, 100% { box-shadow: 0 0 10px #FF0000, 0 0 5px #8B0000 inset; }
            50% { box-shadow: 0 0 20px #FF0000, 0 0 10px #8B0000 inset; }
        }
        .pulse-red { animation: pulse-red 2s infinite alternate; }

        /* Discord Button Pulse */
        @keyframes pulse-blue {
            0%, 100% { box-shadow: 0 0 10px rgba(88, 101, 242, 0.6), 0 0 5px rgba(88, 101, 242, 0.3) inset; }
            50% { box-shadow: 0 0 25px rgba(88, 101, 242, 1), 0 0 10px rgba(88, 101, 242, 0.5) inset; }
        }
        .pulse-blue { animation: pulse-blue 2s infinite alternate; }
        
        /* Fade-in Transition */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out;
        }

        /* GIF Sizing Fixes for Tenor (Crucial for styling) */
        .profile-gif-wrapper .tenor-gif-embed {
            width: 100%;
            height: 100%;
            position: relative;
        }
        .profile-gif-wrapper iframe {
            width: 120% !important; 
            height: 120% !important;
            position: absolute;
            top: -10% !important; 
            left: -10% !important;
            object-fit: cover;
        }
        .banner-gif-wrapper .tenor-gif-embed {
            width: 100%;
            height: 100%;
        }
        .banner-gif-wrapper iframe {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover;
        }

        /* Modal specific styles */
        .modal {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease-out;
        }
        .modal.open {
            display: flex;
            opacity: 1;
        }
        .modal-content {
            transform: scale(0.9);
            transition: transform 0.3s ease-out;
        }
        .modal.open .modal-content {
            transform: scale(1);
        }
    </style>
</head>
<body class="min-h-screen bg-gray-950 font-inter antialiased">

    <!-- Main Layout Container -->
    <div id="app-container" class="min-h-screen flex flex-col lg:flex-row bg-gray-950 text-white">
        
        <!-- SIDEBAR (Profile and Navigation) -->
        <aside id="sidebar" class="w-full lg:w-80 bg-black p-6 shadow-2xl shadow-red-900/40 border-r-4 border-red-900 sticky top-0 z-10">
            <div class="flex flex-col items-center">
                
                <!-- PROFILE GIF (Branded Logo) -->
                <div class="w-32 h-32 bg-black rounded-full border-4 border-red-700 pulse-red overflow-hidden relative mb-4 profile-gif-wrapper">
                    <div class="tenor-gif-embed" data-postid="5769121116284891944" data-share-method="host" data-aspect-ratio="0.9" data-width="100%">
                        <a href="https://tenor.com/view/berserk-gif-5769121116284891944">Berserk GIF</a>
                    </div> 
                </div>

                <h1 class="text-3xl font-cinzel font-black text-red-500 tracking-wider">ETNS PROFILE</h1>
                <p class="text-lg text-gray-400 mt-1">THE STRUGGLER</p>

                <button 
                    id="connectButton"
                    class="mt-6 w-full py-3 bg-red-700 text-white font-bold rounded-xl shadow-lg shadow-red-900/60 transition duration-300 transform hover:scale-[1.02] hover:bg-red-600"
                >
                    INITIATE CONNECTION
                </button>
            </div>

            <!-- Navigation Links -->
            <nav id="nav-links" class="mt-10 space-y-4">
                <!-- Links will be populated by JS -->
            </nav>
            
            <div class="mt-8 pt-4 border-t border-red-900">
                <p class="text-xs text-gray-600">Status: <span class="text-green-500 font-mono break-all">ONLINE / PURE HTML</span></p>
            </div>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <main id="main-content" class="lg:col-span-3 p-4 sm:p-8 flex-grow">
            <!-- Content will be populated by JS -->
        </main>
    </div>
    
    <!-- RICKROLL MODAL -->
    <div id="rickrollModal" class="modal fixed inset-0 bg-black bg-opacity-80 items-center justify-center p-4 z-50">
        <div id="modalContent" class="modal-content relative bg-gray-900 rounded-xl border-4 border-red-700 shadow-2xl shadow-red-900/70 p-8 w-full max-w-2xl">
            <h2 class="text-3xl font-cinzel font-bold text-red-500 mb-4 border-b border-red-800 pb-2">CONNECTION ESTABLISHED</h2>
            <div class="relative w-full aspect-video">
                <iframe 
                    width="560" 
                    height="315" 
                    src="https://www.youtube-nocookie.com/embed/dQw4w9WgXcQ?autoplay=1&controls=0&mute=0&rel=0&showinfo=0&iv_load_policy=3&enablejsapi=1&widgetid=1" 
                    title="YouTube video player" 
                    frameBorder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowFullScreen 
                    class="w-full h-full rounded-lg"
                ></iframe>
            </div>
            <p class="text-lg text-gray-400 mt-4 text-center">Protocol 404: Never Gonna Give You Up</p>
            <button 
                onclick="closeModal()"
                class="mt-6 w-full py-2.5 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition"
            >
                CLOSE WINDOW
            </button>
        </div>
    </div>


    <!-- Load Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Main Application JavaScript -->
    <script>
        // --- Global State ---
        let activeTab = 'profile';

        // --- Data Definitions ---
        const CORE_TENETS = [
            { name: 'FAST', icon: 'Zap', emoji: '‚ö°Ô∏è', description: 'Zero-latency execution. Every millisecond secured.' },
            { name: 'DISCRETE', icon: 'EyeOff', emoji: 'üëª', description: 'Operate in the shadows. Complete anonymity guaranteed.' },
            { name: 'UNTRACKABLE', icon: 'Satellite', emoji: 'üõ∞Ô∏è', description: 'Beyond the gaze of all surveillance. Ghost in the machine.' },
            { name: 'UNBANNABLE', icon: 'Shield', emoji: 'üõ°Ô∏è', description: 'Systems designed for absolute resilience against detection.' },
            { name: 'EVOLVING', icon: 'Infinity', emoji: '‚ôæÔ∏è', description: 'The code is always learning, adapting, and conquering.' },
        ];

        const PAYMENT_METHODS = [
            { name: 'BTC', address: 'bc1q22hmdy35ck278rdq376ynx0846xwgf289xg8vn', icon: 'DollarSign', symbol: '‚Çø', type: 'copy' },
            { name: 'LTC', address: 'LbjXnR5cA5DLoJ1LSgSnVa4CCdFzbngptQ', icon: 'DollarSign', symbol: '≈Å', type: 'copy' },
            { name: 'SOL', address: 'GptR8TrPw8R1ChmRfJLyDS3ihnRa8V2t3ZMbLWf6aZBZ', icon: 'DollarSign', symbol: '‚óé', type: 'copy' },
            { name: 'ETH', address: '0x2390eb79E0436EcE58E6c171F1E0400e08AA1201', icon: 'DollarSign', symbol: 'Œû', type: 'copy' },
            { name: 'PayPal', address: 'https://www.paypal.com/ncp/payment/E57JDEF7FM28C', icon: 'Globe', symbol: 'P', type: 'link' },
        ];

        const NAV_ITEMS = [
            { label: "PROFILE NEXUS", tabName: "profile", icon: 'Zap' },
            { label: "PRODUCTS", tabName: "profile", anchorId: "products", icon: 'Code' },
            { label: "SOUNDTRACK", tabName: "profile", anchorId: "soundtrack-section", icon: 'Music' },
            { label: "CRYPTO WALLETS & PAYPAL", tabName: "wallets", icon: 'DollarSign' },
            { label: "JOIN THE DISCORD!", tabName: "discord", icon: 'Users' }
        ];

        // --- Utility Functions ---

        /**
         * Creates a simple noise burst using Web Audio API to mimic a sword slash sound.
         */
        function playSwordSfx() {
            try {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                const audioCtx = new AudioContext();

                const bufferSize = audioCtx.sampleRate * 0.5;
                const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
                const data = buffer.getChannelData(0);

                for (let i = 0; i < bufferSize; i++) {
                    const decay = 1 - (i / bufferSize);
                    data[i] = (Math.random() * 2 - 1) * decay * (i > bufferSize * 0.1 ? 1 : i / (bufferSize * 0.1));
                }

                const source = audioCtx.createBufferSource();
                source.buffer = buffer;

                const filter = audioCtx.createBiquadFilter();
                filter.type = "highpass";
                filter.frequency.setValueAtTime(4000, audioCtx.currentTime); 
                
                source.connect(filter);
                filter.connect(audioCtx.destination);
                
                source.start();
            } catch (error) {
                console.error("Audio playback error:", error);
            }
        }

        /**
         * Copies text to the clipboard (using execCommand for compatibility in iFrames).
         * @param {string} text - The text to copy.
         */
        function copyToClipboard(text) {
            const tempInput = document.createElement('textarea');
            tempInput.value = text;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);
        }

        /**
         * Handles the click action for payment methods (copy address or open link).
         * @param {string} name - Method name.
         * @param {string} address - Address or link.
         * @param {string} type - 'copy' or 'link'.
         */
        function handlePaymentAction(name, address, type) {
            playSwordSfx();
            if (type === 'copy') {
                copyToClipboard(address);
                console.log(`${name} address copied!`);
            } else if (type === 'link') {
                window.open(address, '_blank');
            }
        }

        /**
         * Renders a product card element.
         */
        function ProductCard(title, description, buttonText, link, isPlaceholder) {
            return `
                <div class="p-5 rounded-xl border-2 transition duration-300 ${
                    isPlaceholder 
                        ? 'bg-gray-800 border-gray-700 text-gray-500 opacity-60' 
                        : 'bg-gray-900 border-red-700 text-gray-300 shadow-xl shadow-red-900/30 hover:border-red-500'
                } transform hover:scale-[1.01]'">
                    <h3 class="text-xl font-cinzel font-bold mb-2 tracking-wide text-red-400">${title}</h3>
                    <p class="text-base mb-4">${description}</p>
                    ${!isPlaceholder ? `
                        <a 
                            href="${link}" 
                            target="_blank" 
                            rel="noopener noreferrer"
                            onclick="playSwordSfx()"
                            class="inline-block px-5 py-2 bg-red-600 rounded-lg text-white font-bold hover:bg-red-700 transition duration-300 shadow-lg hover:shadow-red-500/50"
                        >
                            ${buttonText}
                        </a>` : ''
                    }
                </div>
            `;
        }
        
        /**
         * Renders a payment card element.
         */
        function PaymentCard(method) {
            const isLink = method.type === 'link';
            const displayAddress = isLink ? method.address.split('/').slice(0, 3).join('/') : method.address;
            
            return `
                <div class="bg-gray-900/70 p-5 rounded-xl border-2 border-red-800 shadow-xl shadow-black/60 flex flex-col transition duration-300 hover:bg-gray-800 hover:border-red-600">
                    <div class="flex items-center space-x-3 mb-3">
                        <div class="text-4xl font-serif font-black text-red-400">${method.symbol}</div>
                        <h3 class="text-2xl font-cinzel font-bold text-white">${method.name}</h3>
                    </div>
                    <p class="text-sm text-gray-400 truncate mb-4 font-mono">${displayAddress}</p>
                    <button
                        onclick="handlePaymentAction('${method.name}', '${method.address}', '${method.type}')"
                        class="mt-auto w-full py-2.5 rounded-lg text-base font-bold transition duration-200 shadow-md ${
                            isLink 
                                ? 'bg-red-600 text-white hover:bg-red-700 hover:shadow-red-500/50'
                                : 'bg-red-800 text-red-100 hover:bg-red-700 hover:shadow-red-500/50'
                        }"
                    >
                        ${isLink ? 'VISIT LINK' : 'COPY ADDRESS'}
                    </button>
                </div>
            `;
        }

        // --- Content Rendering Functions ---

        function renderProfileContent() {
            const tenetsHtml = CORE_TENETS.map(tenet => `
                <div class="glaze-box p-4 text-center rounded-xl border border-red-700/70 bg-gray-900/60 hover:bg-gray-800 transition duration-300 shadow-lg shadow-black/50">
                    <p class="text-4xl mb-2">${tenet.emoji}</p>
                    <p class="font-extrabold text-xl text-red-400 tracking-wider mb-2">${tenet.name}</p>
                    <p class="text-xs text-gray-400 italic leading-snug break-words">${tenet.description}</p>
                </div>
            `).join('');

            const productsHtml = `
                ${ProductCard("ETNBOT", "This is ETNBOT, the world's best nitro sniper, forged for speed and secrecy. A true digital weapon.", "View Details", "https://hoster1-p26cx6enm-seirtspids-projects.vercel.app/etnbot_sniper_thread_design.html", false)}
                ${ProductCard("COMING SOON", "The next shadow project is in development, focusing on decentralized identity.", null, null, true)}
                ${ProductCard("COMING SOON", "A new digital weapon awaits creation, codenamed 'Phantom'.", null, null, true)}
            `;

            return `
                <div class="max-w-4xl mx-auto">
                    <!-- WELCOME BANNER (GIF) -->
                    <div class="relative h-40 sm:h-64 bg-black rounded-xl overflow-hidden shadow-2xl shadow-red-900/70 border-4 border-red-700/70 mb-10">
                        <div class="relative w-full h-full banner-gif-wrapper">
                            <div class="tenor-gif-embed" data-postid="12587464080199064649" data-share-method="host" data-aspect-ratio="1.31053" data-width="100%">
                                <a href="https://tenor.com/view/berserk-guts-realayax-ayax-ayaz-gif-12587464080199064649">Berserk Guts GIF</a>
                            </div> 
                        </div>
                    </div>

                    <!-- BIO SECTION -->
                    <section class="mb-10 p-6 bg-gray-900/70 backdrop-blur-sm rounded-xl border border-red-800 shadow-2xl shadow-black/60">
                        <h2 class="text-2xl font-cinzel font-bold text-red-400 mb-4 border-b-2 border-red-900 pb-1">THE STRUGGLER'S MANIFESTO</h2>
                        <p class="text-gray-300 text-lg mb-4 leading-relaxed">
                            I am an architect of digital domains, a dedicated <strong>Website Developer</strong> and <strong>Software Developer</strong> who thrives on forging resilient systems from the ground up. My focus is on creating <strong>robust, high-performance engines</strong> and dynamic user interfaces that feel intuitive and powerful. Whether I'm optimizing a backend's efficiency or meticulously perfecting a frontend component, my passion lies in bringing complex digital ideas to vibrant, functional life.
                        </p>
                        <ul class="text-base text-gray-400 flex flex-wrap gap-x-4">
                            <li class="font-bold text-red-300">Core Languages:</li>
                            <li class="border-r border-red-900 pr-4">C++</li>
                            <li class="border-r border-red-900 pr-4">Python</li>
                            <li class="border-r border-red-900 pr-4">HTML</li>
                            <li class="border-r border-red-900 pr-4">JavaScript</li>
                            <li class="border-r border-red-900 pr-4">React</li>
                            <li>Vanilla JS</li>
                        </ul>
                    </section>

                    <!-- Profile Content -->
                    <div class="animate-fadeIn space-y-12">
                        <!-- CORE TENETS -->
                        <section>
                            <h2 class="text-3xl font-cinzel font-bold text-red-500 mb-6 border-b-2 border-red-800 pb-2">CORE TENETS</h2>
                            <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                                ${tenetsHtml}
                            </div>
                        </section>

                        <!-- PRODUCTS -->
                        <section id="products">
                            <h2 class="text-3xl font-cinzel font-bold text-red-500 mb-6 border-b-2 border-red-800 pb-2">PRODUCTS</h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                                ${productsHtml}
                            </div>
                        </section>

                        <!-- SOUNDTRACK -->
                        <section id="soundtrack-section"> 
                            <h2 class="text-3xl font-cinzel font-bold text-red-500 mb-6 border-b-2 border-red-800 pb-2">SOUNDTRACK OF FATE</h2>
                            <div class="rounded-xl overflow-hidden shadow-2xl shadow-red-900/70 border border-red-700">
                                <iframe 
                                    src="https://open.spotify.com/embed/playlist/7ASHXx9Hah5saHxR92tUS5?utm_source=generator&theme=0" 
                                    width="100%" 
                                    height="380" 
                                    frameborder="0" 
                                    allowfullscreen="" 
                                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                                    loading="lazy"
                                    title="Spotify Playlist Embed"
                                    class="border-0"
                                ></iframe>
                            </div>
                        </section>
                    </div>
                </div>
            `;
        }

        function renderWalletsContent() {
            const cardsHtml = PAYMENT_METHODS.map(method => PaymentCard(method)).join('');

            return `
                <div class="max-w-4xl mx-auto animate-fadeIn p-4 sm:p-0">
                    <h2 class="text-3xl font-cinzel font-bold text-red-500 mb-8 border-b-2 border-red-800 pb-2">CRYPTO WALLETS & PAYPAL</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${cardsHtml}
                    </div>
                </div>
            `;
        }

        function renderDiscordContent() {
            // Check if functions exist before calling them
            const usersIcon = (typeof lucide.Users === 'function') ? lucide.Users({ class: 'w-16 h-16 text-red-500 mb-6 pulse-red' }).outerHTML : '';
            const globeIcon = (typeof lucide.Globe === 'function') ? lucide.Globe({ class: 'w-6 h-6' }).outerHTML : '';
            
            return `
                <div class="max-w-4xl mx-auto animate-fadeIn flex flex-col items-center justify-center p-8 sm:p-12 bg-gray-900/70 rounded-xl border-4 border-red-700 shadow-2xl shadow-red-900/50 backdrop-blur-sm">
                    ${usersIcon}
                    <h2 class="text-4xl font-cinzel font-bold text-red-400 mb-4 text-center tracking-wider">SECURE THE CONNECTION</h2>
                    <p class="text-xl text-gray-300 mb-8 text-center">
                        Join the Eternal Network System.
                    </p>
                    
                    <div class="mb-8 w-full max-w-sm p-4 bg-gray-800 rounded-lg border border-red-700 shadow-inner shadow-black/50">
                        <p class="text-sm font-mono text-gray-500 mb-1">INVITE CODE:</p>
                        <p class="text-3xl font-mono text-white font-bold tracking-widest text-center">
                            1ncel
                        </p>
                    </div>

                    <a 
                        href="https://discord.gg/1ncel" 
                        target="_blank" 
                        rel="noopener noreferrer"
                        onclick="playSwordSfx()"
                        class="w-full max-w-sm py-4 bg-[#5865F2] text-white text-xl font-bold rounded-xl flex items-center justify-center space-x-3 transition duration-300 transform hover:scale-[1.03] shadow-xl pulse-blue border border-blue-400"
                    >
                        ${globeIcon}
                        <span>ENTER THE DOMAIN</span>
                    </a>
                </div>
            `;
        }

        /**
         * Renders the appropriate content block based on the active tab.
         */
        function renderMainContent() {
            const mainContentEl = document.getElementById('main-content');
            mainContentEl.classList.remove('lg:col-span-3'); // Reset class for different layouts

            let contentHtml = '';
            switch (activeTab) {
                case 'profile':
                    contentHtml = renderProfileContent();
                    break;
                case 'wallets':
                    contentHtml = renderWalletsContent();
                    break;
                case 'discord':
                    contentHtml = renderDiscordContent();
                    break;
                default:
                    contentHtml = `<div class="text-red-500 text-center py-10">404: Nexus Link Broken.</div>`;
                    break;
            }
            mainContentEl.innerHTML = `<div class="w-full">${contentHtml}</div>`;

            // Re-render Lucide icons if any were added via data attributes (optional, but harmless)
            lucide.createIcons();
        }

        /**
         * Renders the navigation links in the sidebar.
         */
        function renderNavigation() {
            const navEl = document.getElementById('nav-links');
            navEl.innerHTML = ''; // Clear existing links

            NAV_ITEMS.forEach(item => {
                const isActive = activeTab === item.tabName && !item.anchorId;
                const isAnchorActive = item.anchorId && activeTab === 'profile'; // Products/Soundtrack anchors are part of profile

                const button = document.createElement('button');
                button.setAttribute('data-interactive', 'true');
                button.onclick = () => handleTabChange(item.tabName, item.anchorId);
                
                const activeClass = (isActive || isAnchorActive) 
                    ? 'bg-red-800 text-white shadow-inner shadow-black/50 border border-red-600'
                    : 'text-gray-400 hover:bg-gray-900/50 hover:text-red-300';

                button.className = `sidebar-nav-item w-full flex items-center p-3 rounded-xl transition duration-200 text-left font-bold tracking-wider ${activeClass}`;
                
                // FIX: Check if the lucide function exists and is callable before running it
                const iconFunction = lucide[item.icon];
                const iconSvg = (iconFunction && typeof iconFunction === 'function')
                    ? iconFunction({ class: 'w-5 h-5 mr-3' }).outerHTML
                    : '';

                button.innerHTML = `${iconSvg}${item.label}`;
                navEl.appendChild(button);
            });
            // The explicit call to lucide.createIcons() here is not needed since we constructed the SVGs manually.
        }

        /**
         * Handles the tab change, optional anchor scroll, and SFX.
         */
        function handleTabChange(tabName, anchorId = null) {
            playSwordSfx();
            
            // If the target is an anchor link within the current tab (profile)
            if (anchorId && activeTab === tabName) {
                const element = document.getElementById(anchorId);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
                // No need to change activeTab state or re-render
                return;
            }

            // Standard tab switch
            activeTab = tabName;
            renderNavigation();
            renderMainContent();

            // If switching to profile via a specific anchor (e.g., clicking PRODUCTS from wallets)
            if (anchorId) {
                setTimeout(() => {
                    const element = document.getElementById(anchorId);
                    if (element) {
                        element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 50); 
            }
        }
        
        // --- Modal Functions ---

        function openModal() {
            const modal = document.getElementById('rickrollModal');
            modal.classList.add('open');
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.getElementById('rickrollModal');
            modal.classList.remove('open');
            // Hide after transition
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300); 
        }
        
        // --- Cursor and Global Event Handlers ---
        function setupGlobalEffects() {
            // Set custom cursor
            document.body.style.cursor = 'url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'32\' height=\'32\' viewBox=\'0 0 32 32\'><path fill=\'none\' stroke=\'#E70000\' stroke-width=\'2\' d=\'M16 4v24M4 16h24\'/><circle fill=\'#E70000\' r=\'1\' cx=\'16\' cy=\'16\'/></svg>"), auto';
            
            const handleMouseMove = (e) => {
                const hoveredElement = e.target.closest('a, button, [data-interactive="true"]');
                if (hoveredElement) {
                    document.body.style.cursor = 'url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'32\' height=\'32\' viewBox=\'0 0 32 32\'><circle fill=\'#FF0000\' r=\'5\' cx=\'16\' cy=\'16\' opacity=\'0.8\'/></svg>"), pointer';
                } else {
                    document.body.style.cursor = 'url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'32\' height=\'32\' viewBox=\'0 0 32 32\'><path fill=\'none\' stroke=\'#E70000\' stroke-width=\'2\' d=\'M16 4v24M4 16h24\'/><circle fill=\'#E70000\' r=\'1\' cx=\'16\' cy=\'16\'/></svg>"), auto';
                }
            };

            const handleClick = () => {
                document.body.style.cursor = 'url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'32\' height=\'32\' viewBox=\'0 0 32 32\'><path fill=\'none\' stroke=\'#FF0000\' stroke-width=\'3\' d=\'M16 0v32M0 16h32\'/><circle fill=\'none\' stroke=\'#FF0000\' stroke-width=\'3\' r=\'10\' cx=\'16\' cy=\'16\'/></svg>"), pointer';
                setTimeout(() => {
                    document.body.style.cursor = 'url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'32\' height=\'32\' viewBox=\'0 0 32 32\'><path fill=\'none\' stroke=\'#E70000\' stroke-width=\'2\' d=\'M16 4v24M4 16h24\'/><circle fill=\'#E70000\' r=\'1\' cx=\'16\' cy=\'16\'/></svg>"), auto';
                }, 100);
            };

            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mousedown', handleClick);
            
            // Add listener for the main connect button (Rickroll)
            document.getElementById('connectButton').addEventListener('click', () => {
                playSwordSfx();
                openModal();
            });
            
            // Close modal when clicking outside of the content
            document.getElementById('rickrollModal').addEventListener('click', function(e) {
                if (e.target.id === 'rickrollModal') {
                    closeModal();
                }
            });
        }
        
        // --- Initialization ---

        window.onload = function() {
            // Load Tenor Embed Script (Necessary for GIF embeds)
            const loadTenorScript = () => {
                if (document.getElementById('tenor-embed-script')) return;
                const script = document.createElement('script');
                script.id = 'tenor-embed-script';
                script.type = 'text/javascript';
                script.async = true;
                script.src = 'https://tenor.com/embed.js';
                document.body.appendChild(script);
            };
            loadTenorScript();

            // Initial render
            renderNavigation();
            renderMainContent();
            setupGlobalEffects();
        };

    </script>
</body>
</html>
